(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},6695,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(75254);let a=(0,l.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var c=e.i(43531);let r=(0,l.default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var i=e.i(18566),o=e.i(75157),n=e.i(61225),d=e.i(7471);function p(){let e=(0,i.useRouter)(),{items:l}=(0,n.useWatchlist)(),[p,x]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[m,f]=(0,s.useState)(new Set);(0,s.useEffect)(()=>{!async function(){let{data:e}=await d.supabase.from("specials").select("*");x(e??[]),h(!1)}()},[]);let j=l.map(e=>({productId:e.productId,store:e.store,name:e.name,special:p.find(t=>t.store===e.store&&t.product_id===e.productId)??null,checked:m.has(`${e.store}:${e.productId}`)})).filter(e=>null!==e.special),g=j.filter(e=>"woolworths"===e.store),y=j.filter(e=>"coles"===e.store),N=j.filter(e=>e.special&&e.special.original_price).reduce((e,t)=>e+(t.special.original_price-t.special.current_price),0);if(u)return(0,t.jsx)("div",{className:"mx-auto max-w-lg px-4 pt-safe",children:(0,t.jsxs)("div",{className:"pt-14 space-y-4",children:[(0,t.jsx)("div",{className:"skeleton h-8 w-2/5"}),[1,2,3].map(e=>(0,t.jsx)("div",{className:"skeleton h-14 w-full rounded-xl"},e))]})});let w=(e,s)=>(0,t.jsxs)("section",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,t.jsx)("div",{className:(0,o.cn)("h-2 w-2 rounded-full","woolworths"===e?"bg-woolworths":"bg-coles")}),(0,t.jsx)("h2",{className:"text-lg font-bold",children:(0,o.storeDisplayName)(e)}),(0,t.jsxs)("span",{className:"text-sm text-text-tertiary ml-auto",children:[s.filter(e=>m.has(`${e.store}:${e.productId}`)).length,"/",s.length]})]}),s.map(e=>{let s=`${e.store}:${e.productId}`,l=m.has(s);return(0,t.jsxs)("button",{onClick:()=>{var t,s;return t=e.store,s=e.productId,void f(e=>{let l=new Set(e),a=`${t}:${s}`;return l.has(a)?l.delete(a):l.add(a),l})},className:(0,o.cn)("w-full flex items-center gap-3 px-3 py-3 rounded-xl transition-all active:scale-[0.98]",l?"bg-surface-secondary opacity-60":"bg-surface"),children:[(0,t.jsx)("div",{className:(0,o.cn)("h-6 w-6 rounded-full flex items-center justify-center shrink-0 transition-colors",l?"bg-price-down":"border-2 border-separator"),children:l&&(0,t.jsx)(c.Check,{size:14,className:"text-white",strokeWidth:3})}),(0,t.jsx)("span",{className:(0,o.cn)("flex-1 text-left text-[15px] transition-all",l&&"line-through text-text-tertiary"),children:e.name}),(0,t.jsxs)("div",{className:"text-right shrink-0",children:[(0,t.jsx)("span",{className:"text-sm font-semibold tabular-nums",children:(0,o.formatPrice)(e.special.current_price)}),e.special?.discount_pct&&(0,t.jsxs)("span",{className:"block text-[11px] text-price-down font-medium",children:[e.special.discount_pct,"% off"]})]})]},s)}),0===s.length&&(0,t.jsx)("p",{className:"text-sm text-text-tertiary py-3 text-center",children:"Nothing on special here from your list"})]});return(0,t.jsxs)("div",{className:"mx-auto max-w-lg px-4 pt-safe pb-safe",children:[(0,t.jsxs)("header",{className:"pt-14 pb-2 flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"p-2 -ml-2 rounded-full hover:bg-surface-secondary",children:(0,t.jsx)(a,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,t.jsx)(r,{size:22}),"Shop Mode"]}),N>0&&(0,t.jsxs)("p",{className:"text-sm text-price-down font-medium",children:["Saving ",(0,o.formatPrice)(N)," total"]})]})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-6",children:[w("woolworths",g),w("coles",y)]})]})}e.s(["default",()=>p],6695)}]);