(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44970,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({intel:e,layout:a="compact"}){let r=e?.frequency_class??null,l=e?.total_times_on_special??0,i=e?.avg_frequency_days??null,n=!r&&l<=1,c="frequent"===r?3:"sometimes"===r?2:+("rare"===r),d="frequent"===r?"bg-price-down":"sometimes"===r?"bg-brand":"rare"===r?"bg-price-up":"bg-text-tertiary/30",x=n?"Just spotted":"frequent"===r?"On sale often":"sometimes"===r?"Sometimes on sale":"rare"===r?"Rarely on sale":"Just spotted",o=!n&&i?`Every ~${i}d`:n?"No sale history yet":null;return"compact"===a?(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,t.jsx)("div",{className:"flex items-center gap-[3px]",children:[0,1,2].map(e=>(0,t.jsx)("span",{className:(0,s.cn)("h-[5px] w-[5px] rounded-full transition-colors",e<c?d:"bg-text-tertiary/15 dark:bg-text-tertiary/25")},e))}),(0,t.jsx)("span",{className:(0,s.cn)("text-[10px] font-semibold leading-none","rare"===r?"text-price-up":"frequent"===r?"text-price-down":"sometimes"===r?"text-brand-dark dark:text-brand":"text-text-tertiary"),children:x})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-[3px]",children:[0,1,2].map(e=>(0,t.jsx)("span",{className:(0,s.cn)("h-1.5 w-1.5 rounded-full transition-colors",e<c?d:"bg-text-tertiary/15 dark:bg-text-tertiary/25")},e))}),(0,t.jsx)("span",{className:(0,s.cn)("text-[11px] font-semibold","rare"===r?"text-price-up":"frequent"===r?"text-price-down":"sometimes"===r?"text-brand-dark dark:text-brand":"text-text-tertiary"),children:x}),o&&(0,t.jsx)("span",{className:"text-[11px] text-text-tertiary",children:o})]})}e.s(["SaleSignal",()=>a])},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(70273);let l=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var i=e.i(75157),n=e.i(44970),c=e.i(61225),d=e.i(7471);function x(){let e=(0,a.useRouter)(),{items:x,removeItem:o}=(0,c.useWatchlist)(),[m,p]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[f,b]=(0,s.useState)(!0);(0,s.useEffect)(()=>{!async function(){let{data:e}=await d.supabase.from("specials").select("*"),{data:t}=await d.supabase.from("special_intel").select("*");p(e??[]),h(t??[]),b(!1)}()},[]);let g=x.map(e=>{let t=m.find(t=>t.store===e.store&&t.product_id===e.productId),s=u.find(t=>t.store===e.store&&t.product_id===e.productId);return{...e,special:t,intel:s}}),j=g.filter(e=>e.special),y=g.filter(e=>!e.special).sort((e,t)=>(e.intel?.expected_days_until_next??999)-(t.intel?.expected_days_until_next??999)),N=j.length;return f?(0,t.jsx)("div",{className:"mx-auto max-w-lg px-4 pt-safe",children:(0,t.jsxs)("div",{className:"pt-14 space-y-4",children:[(0,t.jsx)("div",{className:"skeleton h-10 w-1/3"}),(0,t.jsx)("div",{className:"skeleton h-12 w-full rounded-xl"}),[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"skeleton h-12 w-12 rounded-lg shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"skeleton h-4 w-3/4"}),(0,t.jsx)("div",{className:"skeleton h-3 w-1/2"})]})]},e))]})}):(0,t.jsxs)("div",{className:"mx-auto max-w-lg px-4 pt-safe pb-safe",children:[(0,t.jsxs)("header",{className:"pt-14 pb-2",children:[(0,t.jsx)("h1",{className:"text-[34px] font-bold leading-tight tracking-tight",children:"My List"}),x.length>0&&(0,t.jsx)("p",{className:"text-sm text-text-secondary mt-0.5",children:N>0?`${N} on special today`:"Nothing on special right now"})]}),0===x.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[(0,t.jsx)("div",{className:"mb-4 rounded-full bg-surface-secondary p-5",children:(0,t.jsx)(r.Star,{size:32,className:"text-text-tertiary"})}),(0,t.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"No items yet"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary max-w-[260px] mb-4",children:"Browse specials and add items you want to keep an eye on"}),(0,t.jsx)("button",{onClick:()=>e.push("/browse"),className:"px-5 py-2.5 bg-text-primary text-surface rounded-xl text-sm font-medium",children:"Browse specials"})]}):(0,t.jsxs)("div",{className:"space-y-2 mt-2",children:[N>0&&(0,t.jsxs)("button",{onClick:()=>e.push("/shop"),className:"w-full flex items-center justify-between px-4 py-3 rounded-xl bg-brand-light text-brand-dark font-medium text-sm transition-transform active:scale-[0.98]",children:[(0,t.jsxs)("span",{children:["Start shopping â€” ",N," item",N>1?"s":""," on special"]}),(0,t.jsx)(l,{size:18})]}),j.length>0&&(0,t.jsx)("div",{className:"pt-2",children:j.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 py-3 border-b border-separator last:border-0",children:[(0,t.jsxs)("div",{className:"relative shrink-0",children:[e.special?.image_url?(0,t.jsx)("img",{src:e.special.image_url,alt:e.name,className:"h-14 w-14 rounded-xl object-contain bg-white dark:bg-surface-secondary p-1",loading:"lazy"}):(0,t.jsx)("div",{className:"h-14 w-14 rounded-xl bg-surface-secondary flex items-center justify-center text-text-tertiary text-sm font-medium",children:e.name.charAt(0)}),(0,t.jsx)("span",{className:"absolute -bottom-0.5 -right-0.5 h-3.5 w-3.5 rounded-full bg-price-down border-2 border-surface"})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("span",{className:"block text-[15px] font-semibold truncate",children:e.name}),(0,t.jsxs)("span",{className:"block text-xs text-price-down font-medium",children:[e.special?.discount_pct,"% off at ",(0,i.storeDisplayName)(e.store)]}),(0,t.jsx)(n.SaleSignal,{intel:e.intel,layout:"inline"})]}),(0,t.jsxs)("div",{className:"text-right shrink-0",children:[(0,t.jsx)("span",{className:"block text-base font-bold tabular-nums",children:(0,i.formatPrice)(e.special.current_price)}),e.special?.original_price&&(0,t.jsx)("span",{className:"block text-xs text-text-tertiary line-through tabular-nums",children:(0,i.formatPrice)(e.special.original_price)})]})]},`${e.store}-${e.productId}`))}),y.length>0&&(0,t.jsxs)("div",{className:"pt-2",children:[j.length>0&&(0,t.jsx)("div",{className:"h-px bg-separator my-2"}),y.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 py-3 border-b border-separator last:border-0",children:[(0,t.jsx)("div",{className:"shrink-0",children:e.intel?.image_url?(0,t.jsx)("img",{src:e.intel.image_url,alt:e.name,className:"h-14 w-14 rounded-xl object-contain bg-white dark:bg-surface-secondary p-1 opacity-60",loading:"lazy"}):(0,t.jsx)("div",{className:"h-14 w-14 rounded-xl bg-surface-secondary flex items-center justify-center text-text-tertiary text-sm font-medium",children:e.name.charAt(0)})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("span",{className:"block text-[15px] text-text-primary truncate",children:e.name}),(0,t.jsx)("span",{className:"block text-xs text-text-tertiary",children:(0,i.predictionText)(e.intel?.expected_days_until_next??null,e.intel?.days_since_last_special??null)}),(0,t.jsx)(n.SaleSignal,{intel:e.intel,layout:"inline"})]})]},`${e.store}-${e.productId}`))]})]})]})}e.s(["default",()=>x],52683)}]);