(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44970,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({intel:e,layout:a="compact"}){let l=e?.frequency_class??null,r=e?.total_times_on_special??0,i=e?.avg_frequency_days??null,n=!l&&r<=1,c="frequent"===l?3:"sometimes"===l?2:+("rare"===l),o="frequent"===l?"bg-price-down":"sometimes"===l?"bg-brand":"rare"===l?"bg-price-up":"bg-text-tertiary/30",d=n?"Just spotted":"frequent"===l?"On sale often":"sometimes"===l?"Sometimes on sale":"rare"===l?"Rarely on sale":"Just spotted",x=!n&&i?`Every ~${i}d`:n?"No sale history yet":null;return"compact"===a?(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,t.jsx)("div",{className:"flex items-center gap-[3px]",children:[0,1,2].map(e=>(0,t.jsx)("span",{className:(0,s.cn)("h-[5px] w-[5px] rounded-full transition-colors",e<c?o:"bg-text-tertiary/15 dark:bg-text-tertiary/25")},e))}),(0,t.jsx)("span",{className:(0,s.cn)("text-[10px] font-semibold leading-none","rare"===l?"text-price-up":"frequent"===l?"text-price-down":"sometimes"===l?"text-brand-dark dark:text-brand":"text-text-tertiary"),children:d})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-[3px]",children:[0,1,2].map(e=>(0,t.jsx)("span",{className:(0,s.cn)("h-1.5 w-1.5 rounded-full transition-colors",e<c?o:"bg-text-tertiary/15 dark:bg-text-tertiary/25")},e))}),(0,t.jsx)("span",{className:(0,s.cn)("text-[11px] font-semibold","rare"===l?"text-price-up":"frequent"===l?"text-price-down":"sometimes"===l?"text-brand-dark dark:text-brand":"text-text-tertiary"),children:d}),x&&(0,t.jsx)("span",{className:"text-[11px] text-text-tertiary",children:x})]})}e.s(["SaleSignal",()=>a])},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},24879,e=>{"use strict";var t=e.i(43476);let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var a=e.i(43531),l=e.i(75157),r=e.i(61225),i=e.i(44970);function n({special:e,intel:n,size:c="default"}){let{hasItem:o,toggleItem:d}=(0,r.useWatchlist)(),x=o(e.store,e.product_id),m=e.discount_pct&&e.discount_pct>=48,p=e.original_price&&e.current_price?(e.original_price-e.current_price).toFixed(2):null;return(0,t.jsxs)("div",{className:(0,l.cn)("relative bg-surface-raised rounded-2xl overflow-hidden","border border-separator/60","transition-transform active:scale-[0.97]","carousel"===c?"w-[156px]":"w-full"),children:[(0,t.jsx)("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:m?(0,t.jsx)("span",{className:"badge-half-price",children:"Â½ PRICE"}):e.discount_pct?(0,t.jsxs)("span",{className:"badge-save",children:[e.discount_pct,"% OFF"]}):null}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),d({store:e.store,productId:e.product_id,name:e.name})},className:(0,l.cn)("absolute top-2 right-2 z-10 p-1.5 rounded-full transition-all","shadow-sm",x?"bg-brand text-white":"bg-white/90 dark:bg-surface-secondary/90 text-text-secondary backdrop-blur-sm"),"aria-label":x?"Remove from list":"Add to list",children:x?(0,t.jsx)(a.Check,{size:14,strokeWidth:3}):(0,t.jsx)(s,{size:14,strokeWidth:2.5})}),(0,t.jsx)("div",{className:"flex items-center justify-center bg-white dark:bg-surface-secondary pt-3 pb-1 px-3",children:e.image_url?(0,t.jsx)("img",{src:e.image_url,alt:e.name,className:"h-[100px] w-[100px] object-contain mix-blend-multiply",loading:"lazy"}):(0,t.jsx)("div",{className:"h-[100px] w-[100px] flex items-center justify-center text-text-tertiary text-2xl font-medium",children:e.name.charAt(0)})}),(0,t.jsxs)("div",{className:"px-2.5 pb-2.5 pt-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-0.5",children:[(0,t.jsx)("span",{className:(0,l.cn)("h-1.5 w-1.5 rounded-full","woolworths"===e.store?"bg-woolworths":"bg-coles")}),(0,t.jsx)("span",{className:"text-[10px] text-text-tertiary font-medium uppercase tracking-wide",children:"woolworths"===e.store?"Woolworths":"Coles"})]}),(0,t.jsx)("p",{className:"text-[13px] font-medium leading-tight text-text-primary line-clamp-2 min-h-[32px]",children:e.name}),(0,t.jsxs)("div",{className:"mt-1.5 flex items-baseline gap-1.5",children:[(0,t.jsx)("span",{className:"text-[18px] font-bold tabular-nums leading-none",children:(0,l.formatPrice)(e.current_price)}),e.original_price&&(0,t.jsx)("span",{className:"text-[12px] text-text-tertiary line-through tabular-nums",children:(0,l.formatPrice)(e.original_price)})]}),p&&(0,t.jsxs)("p",{className:"text-[11px] font-semibold text-price-down mt-0.5",children:["Save $",p]}),(0,t.jsx)(i.SaleSignal,{intel:n,layout:"compact"})]})]})}e.s(["ProductTile",()=>n],24879)},90454,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(55436),l=e.i(75254);let r=(0,l.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),i=(0,l.default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]),n=(0,l.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var c=e.i(75157),o=e.i(24879);function d({store:e,size:s="sm",winner:a=!1}){let l="woolworths"===e;return(0,t.jsxs)("span",{className:(0,c.cn)("inline-flex items-center gap-1 font-semibold rounded-full","sm"===s&&"px-2 py-0.5 text-[11px]","md"===s&&"px-3 py-1 text-xs",l?"bg-woolworths-bg text-woolworths":"bg-coles-bg text-coles",a&&"ring-2 ring-brand/30"),children:[(0,t.jsx)("span",{className:(0,c.cn)("inline-block rounded-full","sm"===s?"h-1.5 w-1.5":"h-2 w-2",l?"bg-woolworths":"bg-coles")}),l?"Woolworths":"Coles"]})}var x=e.i(7471);let m=[{emoji:"ðŸ¥›",label:"Dairy",query:"milk cheese yoghurt"},{emoji:"ðŸž",label:"Bread",query:"bread"},{emoji:"ðŸ¥©",label:"Meat",query:"beef chicken lamb mince"},{emoji:"ðŸŽ",label:"Fruit",query:"apple banana orange berry"},{emoji:"ðŸ¥¤",label:"Drinks",query:"coca cola pepsi water juice"},{emoji:"ðŸ§¹",label:"Cleaning",query:"detergent cleaning spray wipe"},{emoji:"ðŸ«",label:"Snacks",query:"chips chocolate biscuit"},{emoji:"ðŸ§´",label:"Personal",query:"shampoo soap deodorant"},{emoji:"ðŸ",label:"Pasta",query:"pasta sauce spaghetti"},{emoji:"â˜•",label:"Coffee",query:"coffee nespresso instant"},{emoji:"ðŸ¶",label:"Pet Food",query:"dog cat pet food"},{emoji:"ðŸ‘¶",label:"Baby",query:"nappy wipes formula baby"}];function p(){try{return JSON.parse(localStorage.getItem("bravo_recent_searches")||"[]")}catch{return[]}}function u(){let[e,l]=(0,s.useState)(""),[u,h]=(0,s.useState)([]),[f,b]=(0,s.useState)([]),[g,y]=(0,s.useState)([]),[j,N]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[k,_]=(0,s.useState)([]),[S,q]=(0,s.useState)("all"),C=(0,s.useRef)(null);(0,s.useEffect)(()=>{_(p()),Promise.all([x.supabase.from("special_intel").select("*"),x.supabase.from("specials").select("*").not("discount_pct","is",null).order("discount_pct",{ascending:!1}).limit(6)]).then(([{data:e},{data:t}])=>{b(e??[]),y(t??[])})},[]);let P=(0,s.useCallback)(async(e,t="all")=>{if(e.trim().length<2){h([]),w(!1);return}N(!0),w(!0);let s=x.supabase.from("specials").select("*").ilike("name",`%${e.trim()}%`).order("discount_pct",{ascending:!1,nullsFirst:!1}).limit(60);"all"!==t&&(s=s.eq("store",t));let{data:a}=await s;if(h(a??[]),N(!1),e.trim().length>=2){var l;let t;l=e.trim(),(t=p().filter(e=>e!==l)).unshift(l),localStorage.setItem("bravo_recent_searches",JSON.stringify(t.slice(0,5))),_(p())}},[]);(0,s.useEffect)(()=>{let t=setTimeout(()=>P(e,S),300);return()=>clearTimeout(t)},[e,S,P]);let z=!v&&!j,T=u.length;return(0,t.jsxs)("div",{className:"mx-auto max-w-lg pt-safe pb-safe",children:[(0,t.jsx)("header",{className:"pt-14 pb-1 px-4",children:(0,t.jsx)("h1",{className:"text-[34px] font-bold leading-tight tracking-tight",children:"Search"})}),(0,t.jsxs)("div",{className:"sticky top-0 z-20 bg-surface/95 backdrop-blur-lg px-4 pt-2 pb-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(a.Search,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-text-tertiary pointer-events-none"}),(0,t.jsx)("input",{ref:C,type:"text",placeholder:"Search for any product...",value:e,onChange:e=>l(e.target.value),className:(0,c.cn)("w-full pl-11 pr-11 py-3.5 rounded-2xl text-[16px]","bg-surface-secondary text-text-primary placeholder:text-text-tertiary","focus:outline-none focus:ring-2 focus:ring-brand/40","transition-shadow")}),e&&(0,t.jsx)("button",{onClick:()=>{l(""),h([]),w(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full bg-text-tertiary/20",children:(0,t.jsx)(r,{size:14,className:"text-text-secondary"})})]}),v&&(0,t.jsxs)("div",{className:"flex gap-2 mt-2.5",children:[["all","woolworths","coles"].map(e=>(0,t.jsx)("button",{onClick:()=>q(e),className:(0,c.cn)("px-3 py-1 rounded-full text-[13px] font-medium transition-colors",S===e?"bg-text-primary text-surface":"bg-surface-secondary text-text-secondary"),children:"all"===e?"All":"woolworths"===e?"Woolworths":"Coles"},e)),T>0&&(0,t.jsxs)("span",{className:"ml-auto text-[13px] text-text-tertiary self-center tabular-nums",children:[T," results"]})]})]}),z&&(0,t.jsxs)("div",{className:"px-4",children:[k.length>0&&(0,t.jsxs)("section",{className:"mt-2 mb-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("h2",{className:"text-[15px] font-semibold flex items-center gap-1.5 text-text-secondary",children:[(0,t.jsx)(i,{size:14}),"Recent"]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("bravo_recent_searches"),_([])},className:"text-[13px] text-brand font-medium",children:"Clear"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,t.jsx)("button",{onClick:()=>{l(e),C.current?.focus()},className:(0,c.cn)("px-3 py-1.5 rounded-full text-[13px] font-medium","bg-surface-secondary text-text-primary","transition-colors active:bg-separator"),children:e},e))})]}),(0,t.jsxs)("section",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-[15px] font-semibold text-text-secondary mb-3",children:"Browse by category"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:m.map(e=>(0,t.jsxs)("button",{onClick:()=>{l(e.query.split(" ")[0]),C.current?.focus()},className:"category-pick flex flex-col items-center gap-1 py-3 rounded-2xl bg-surface-secondary",children:[(0,t.jsx)("span",{className:"text-[28px] leading-none",children:e.emoji}),(0,t.jsx)("span",{className:"text-[11px] font-medium text-text-secondary",children:e.label})]},e.label))})]}),g.length>0&&(0,t.jsxs)("section",{className:"mb-20",children:[(0,t.jsxs)("h2",{className:"text-[15px] font-semibold flex items-center gap-1.5 text-text-secondary mb-3",children:[(0,t.jsx)(n,{size:14}),"Top deals right now"]}),(0,t.jsx)("div",{className:"space-y-0 divide-y divide-separator",children:g.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>l(e.name.split(" ").slice(0,2).join(" ")),className:"w-full flex items-center gap-3 py-3 text-left transition-colors active:bg-surface-secondary",children:[(0,t.jsx)("span",{className:"text-[13px] font-bold text-text-tertiary w-5 text-center tabular-nums",children:s+1}),e.image_url?(0,t.jsx)("img",{src:e.image_url,alt:e.name,className:"h-10 w-10 rounded-lg object-contain bg-white dark:bg-surface-secondary shrink-0",loading:"lazy"}):(0,t.jsx)("div",{className:"h-10 w-10 rounded-lg bg-surface-secondary shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-[14px] font-medium truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,t.jsx)(d,{store:e.store,size:"sm"}),e.discount_pct&&(0,t.jsxs)("span",{className:"text-[11px] font-bold text-price-down",children:[e.discount_pct,"% off"]})]})]}),(0,t.jsx)("span",{className:"text-[15px] font-bold tabular-nums shrink-0",children:(0,c.formatPrice)(e.current_price)})]},e.id))})]})]}),j&&(0,t.jsx)("div",{className:"px-4 mt-2",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(e=>(0,t.jsx)("div",{className:"skeleton h-[220px] rounded-2xl"},e))})}),!j&&v&&0===u.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center py-16 text-center px-4",children:[(0,t.jsx)("div",{className:"mb-3 text-4xl",children:"ðŸ”"}),(0,t.jsx)("p",{className:"text-[15px] font-medium text-text-primary mb-1",children:"No specials found"}),(0,t.jsxs)("p",{className:"text-[13px] text-text-tertiary max-w-[240px]",children:["â€œ",e,"â€ isn't on special this week. Try a different search term."]})]}),!j&&u.length>0&&(0,t.jsx)("div",{className:"px-4 mt-1 mb-20",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:u.map(e=>{let s,a;return(0,t.jsx)(o.ProductTile,{special:e,intel:(s=e.store,a=e.product_id,f.find(e=>e.store===s&&e.product_id===a)??null)},e.id)})})})]})}e.s(["default",()=>u],90454)}]);